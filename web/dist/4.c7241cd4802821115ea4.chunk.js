webpackJsonp([4],{173:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(178),o=a(185),n=a(5),s=n(r.a,o.a,!1,null,null,null);s.options.__file="src/views/account.vue",t.default=s.exports},178:function(e,t,a){"use strict";var r=a(6);t.a={data:function(){var e=this;return{modal:!1,modalLoading:!0,loading:!1,keyword:"",form:{},rules:{username:[{required:!0,message:"请填写用户名称!",trigger:"blur"},{pattern:/^[a-z]\w{3,12}$/,message:"以小写字母开头, 长度在4~12之间, 只能包含字母、数字和下划线!",trigger:"blur"}],password:[{required:!0,message:"请填写账户密码!",trigger:"blur"},{pattern:/^[a-zA-Z]\w{5,17}$/,message:"以字母开头, 长度在6~18之间, 只能包含字母、数字和下划线!",trigger:"blur"}],passwdCheck:[{required:!0,message:"请确认账户密码!",trigger:"blur"},{validator:function(t,a,r,o,n){a!==e.form.password?r(new Error("两次密码输入不匹配")):r()},trigger:"blur"}],phone:[{required:!0,message:"请填写手机号码!",trigger:"blur"},{pattern:/^1[0-9]{10}$|^[569][0-9]{7}$/,message:"请有效的手机号码!"}]},columns:[{type:"selection",width:60,align:"center"},{key:"username",title:"用户名称"},{key:"phone",title:"联系方式"},{key:"role",title:"角色"},{key:"created",title:"创建时间",render:function(e,t){var a=t.row;return r.a.formatDate(a.created)}},{key:"status",title:"状态",width:110,align:"center",render:function(t,a){var r=a.row,o=r.username,n=r.status;return t("i-switch",{props:{size:"large",value:"ACTIVE"===n},on:{"on-change":function(t){e.updateAccountStatus(o,t?"ACTIVE":"DISABLED")}},scopedSlots:{open:function(e){return t("span","启用")},close:function(e){return t("span","禁用")}}})}}],data:[]}},computed:{filterData:function(){var e=this;return this.data.filter(function(t){return t.username.indexOf(e.keyword)>=0})}},methods:{changeLoading:function(){var e=this;this.modalLoading=!1,this.$nextTick(function(){e.modalLoading=!0})},loadData:function(){var e=this;this.loading=!0,r.a.ajax.get("/account",{}).then(function(t){var a=t.data;e.data=a,e.loading=!1}).catch(function(t){e.$Message.error(t),e.loading=!1})},handleAccountCreate:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return e.changeLoading();r.a.ajax.post("/account",{phone:e.form.phone,username:e.form.username,password:e.form.password}).then(function(t){var a=t.data;e.changeLoading(),e.modal=!1,e.loadData(),e.$Message.success(a.msg)}).catch(function(t){e.changeLoading(),e.modal=!1,e.$Message.err(t.msg)})})},updateAccountStatus:function(e,t){var a=this;r.a.ajax.put("/account/"+e,{status:t}).then(function(e){var t=e.data;a.$Message.success(t.msg),a.loadData()}).catch(function(e){a.$Message.err(e)})}},created:function(){this.loadData()}}},185:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Row",[a("Col",{attrs:{span:"4"}},[a("Input",{attrs:{icon:"search",placeholder:"账户名称搜索..."},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("Col",{attrs:{span:"20","class-name":"text-right"}},[a("Button",{on:{click:function(t){e.modal=!0}}},[e._v("创建用户")])],1),e._v(" "),a("Col",{staticStyle:{height:"20px"},attrs:{span:"24"}}),e._v(" "),a("Col",{attrs:{span:"24"}},[a("Table",{attrs:{border:"",stripe:"",loading:e.loading,columns:e.columns,data:e.filterData}})],1),e._v(" "),a("Col",[a("Modal",{attrs:{width:"380px",title:"普通账户创建","ok-text":"保存",loading:e.modalLoading},on:{"on-ok":e.handleAccountCreate},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("Form",{ref:"form",attrs:{"label-position":"top",model:e.form,rules:e.rules}},[a("FormItem",{attrs:{prop:"username"}},[a("Input",{attrs:{placeholder:"请输入用户名称..."},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}},[a("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),e._v(" "),a("FormItem",{attrs:{prop:"password"}},[a("Input",{attrs:{type:"password",placeholder:"请输入账户密码..."},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[a("Icon",{attrs:{slot:"prepend",type:"ios-locked-outline"},slot:"prepend"})],1)],1),e._v(" "),a("FormItem",{attrs:{prop:"passwdCheck"}},[a("Input",{attrs:{type:"password",placeholder:"请输入确认账户密码..."},model:{value:e.form.passwdCheck,callback:function(t){e.$set(e.form,"passwdCheck",t)},expression:"form.passwdCheck"}},[a("Icon",{attrs:{slot:"prepend",type:"ios-locked-outline"},slot:"prepend"})],1)],1),e._v(" "),a("FormItem",{attrs:{prop:"phone"}},[a("Input",{attrs:{placeholder:"请输入电话号码..."},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}},[a("Icon",{attrs:{slot:"prepend",type:"iphone"},slot:"prepend"})],1)],1)],1)],1)],1)],1)},o=[];r._withStripped=!0;var n={render:r,staticRenderFns:o};t.a=n}});