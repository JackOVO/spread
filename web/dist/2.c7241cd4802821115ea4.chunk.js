webpackJsonp([2],{174:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(179),r=a(186),o=a(5),s=o(n.a,r.a,!1,null,null,null);s.options.__file="src/views/link.vue",e.default=s.exports},179:function(t,e,a){"use strict";var n=a(6),r=sessionStorage.role,o=sessionStorage.username;e.a={data:function(){return{loading:!1,keyword:"",selected:"ADMIN"===r?"":o,current:1,pageSize:100,sort:{key:"created",order:"desc"},columns:[{key:"name",title:"序号",width:"80px",render:function(t,e){return e.index}},{key:"name",title:"名字",width:"80px"},{key:"phone",title:"电话",width:"150px"},{key:"style",title:"款式",width:"80px"},{key:"size",title:"尺码",width:"80px"},{key:"address",title:"地址",render:function(t,e){var a=e.row;return"\n              "+a.prov+" /\n              "+a.city+" /\n              "+a.region+" - \n              "+a.address+"\n            "}},{key:"sharer",title:"分享人",width:"100px"},{sortable:"custom",sortMethod:"desc",key:"created",title:"创建时间",width:"150px",render:function(t,e){var a=e.row;return n.a.formatDate(a.created)}}],data:[],accounts:[]}},computed:{total:function(){var t=this;return this.data.filter(function(e){return e.name.indexOf(t.keyword)>=0}).length},filterData:function(){var t=this,e=this.sort,a=e.key,r=e.order,o=(this.current-1)*this.pageSize,s=this.current*this.pageSize;return this.data.filter(function(e){return e.name.indexOf(t.keyword)>=0}).sort(function(t,e){return n.a.dateSort(t[a],e[a],r)}).slice(o,s)},accountList:function(){return"ADMIN"!==r?[{label:o,value:o}]:[{label:"全部",value:""}].concat(this.accounts.map(function(t){return{label:t.username,value:t.username}}))}},methods:{changePage:function(t){this.current=t},changePageSize:function(t){this.pageSize=t},changeSort:function(t){var e=t.key,a=t.order;this.sort={key:e,order:a}},loadData:function(){var t=this;this.loading=!0,n.a.ajax.get("/link",{params:{sharer:this.selected}}).then(function(e){var a=e.data;t.data=a,t.loading=!1}).catch(function(e){t.$Message.error(e),t.loading=!1})},loadAccounts:function(){var t=this;n.a.ajax.get("/account",{}).then(function(e){var a=e.data;t.accounts=a}).catch(function(e){t.$Message.error(e)})}},created:function(){this.loadData(),"ADMIN"===r&&this.loadAccounts()}}},186:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{span:"4"}},[a("Input",{attrs:{icon:"search",placeholder:"名字搜索..."},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),a("Col",{attrs:{span:"20"}},[a("Select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择分享人"},on:{"on-change":t.loadData},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},t._l(t.accountList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("Col",{staticStyle:{height:"20px"},attrs:{span:"24"}}),t._v(" "),a("Col",{attrs:{span:"24"}},[a("Table",{attrs:{border:"",stripe:"",loading:t.loading,columns:t.columns,data:t.filterData},on:{"on-sort-change":t.changeSort}})],1),t._v(" "),a("Col",{staticStyle:{height:"20px"},attrs:{span:"24"}}),t._v(" "),a("Col",{attrs:{span:"24","class-name":"text-right"}},[a("Page",{attrs:{"show-total":"","show-sizer":"","show-elevator":"",total:t.total,current:t.current,"page-size":t.pageSize,"page-size-opts":[10,50,100],size:"small"},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1),t._v(" "),a("Col",{staticStyle:{height:"20px"},attrs:{span:"24"}})],1)},r=[];n._withStripped=!0;var o={render:n,staticRenderFns:r};e.a=o}});